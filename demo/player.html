<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>html5 example: IMG Preview</title>
</head>
<body>
<div><input id="viewFiles" type="file"/></div>

<video id="video1" width="800" height="600" src="sobey_h264.mp4" autoplay="autoplay" controls="controls" style="margin-top:15px;">
</video>  


<img id="viewImg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA
7ljmRAAAAGElEQVQIW2P4DwcMDAxAfBvMAhEQMYgcACEHG8ELxtbPAAAAAElFTkSuQmCC" style="max-width:500px"/>

<script type="text/javascript">
(function a() {
    var viewFiles = document.getElementById("viewFiles");
    var videoView = document.getElementById("video1");
    var imageView = document.getElementById("viewImg");
    function viewFile (file) {
        var reader = new FileReader();
        reader.onload = function( evt ){
            videoView.src = evt.target.result;
            imageView.src = evt.target.result;
            alert(videoView.videoWidth);
            videoView.play();
            videoView.loop = "loop";
        }
        reader.readAsDataURL(file);
    }
    viewFiles.addEventListener("change", function () {
        //通过 this.files 取到 FileList ，这里只有一个
        viewFile(this.files[0]);
    }, false);
})();
</script>
</body>
</html>
